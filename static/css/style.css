/* 1. BASE LAYOUT (Mobile First Architecture)*/
body {
    background-color: #121213;
    color: white;
    font-family: 'Courier New', Courier, monospace;
    display: flex;
    flex-direction: column; /* Stack items: Header -> Board -> Keyboard */
    align-items: center;
    
    /* THE MAGIC UNIT: 100dvh ignores the mobile address bar shrinking/growing */
    height: 100vh;
    height: 100dvh; 
    
    margin: 0;
    overflow: hidden; /* No scrolling the whole page */
    
    /* PREVENT NATIVE MOBILE BEHAVIORS */
    user-select: none; /* Stop user from highlighting text */
    -webkit-user-select: none;
    -webkit-touch-callout: none; /* Stop the "Copy/Paste" menu on long press */
}

/* 2. STICKY HEADER */
header {
    border-bottom: 1px solid #3a3a3c;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px 0;
    flex-shrink: 0; /* Keep header fixed size */
    position: relative;
    z-index: 50;
    background-color: #121213;
}

h1 { margin: 0; font-size: 1.5rem; letter-spacing: 2px; }

.header-tools {
    position: absolute;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 20px; 
}

.tool-btn {
    background: none; border: none; font-size: 1.5rem;
    cursor: pointer; padding: 0; color: #fff;
    transition: transform 0.2s;
}
.tool-btn:active { transform: scale(0.9); } /* Tactile click feel */

/* 3. SCROLLABLE GAME BOARD */
#game-board {
    display: flex;
    flex-direction: column;
    gap: 5px;
    
    /* FILL AVAILABLE SPACE */
    flex-grow: 1; 
    overflow-y: auto; /* Scroll ONLY inside this box */
    width: 100%;
    align-items: center;
    padding-top: 10px;
    padding-bottom: 10px;
    
    /* Hide scrollbars for cleaner look */
    scrollbar-width: none; 
    -ms-overflow-style: none;
}
#game-board::-webkit-scrollbar { display: none; }

.row { display: flex; gap: 5px; align-items: center; }

.tile {
    /* Responsive Sizing: Use 'vmin' to scale relative to screen size */
    width: 13vmin; 
    height: 13vmin;
    max-width: 60px; max-height: 60px; /* But don't get too huge on desktop */
    min-width: 40px; min-height: 40px; /* Don't get too tiny */
    
    border: 2px solid #3a3a3c;
    display: flex; justify-content: center; align-items: center;
    font-size: 1.8rem; font-weight: bold; text-transform: uppercase;
}
.tile.active { border-color: #818384; }

/* FEEDBACK DOTS */
.feedback-box {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 4px; margin-left: 10px; padding: 5px;
    border-left: 1px solid #3a3a3c;
}
.dot {
    width: 10px; height: 10px; border-radius: 50%;
    border: 2px solid #3a3a3c; background-color: transparent;
}
.dot.miss { background-color: #3a3a3c; border-color: #3a3a3c; }
.dot.bull { background-color: #538d4e; border-color: #538d4e; box-shadow: 0 0 5px #538d4e; }
.dot.cow { background-color: #b59f3b; border-color: #b59f3b; box-shadow: 0 0 5px #b59f3b; }

/* 4. STICKY KEYBOARD (The Controls)*/
#keyboard {
    display: grid;
    grid-template-columns: repeat(5, 1fr); /* 5 buttons per row */
    gap: 6px;
    padding: 8px;
    width: 96%;
    max-width: 500px;
    flex-shrink: 0;
    background-color: #121213;
    z-index: 10;
    
    /* THE SAFE AREA FIX FOR IPHONES */
    padding-bottom: calc(20px + env(safe-area-inset-bottom));
}

/* static/css/style.css */

.key {
    background-color: #818384;
    border: none;
    padding: 15px 0;
    border-radius: 6px;
    color: white;
    font-size: 1.25rem;
    font-weight: bold;
    cursor: pointer;
    
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    
    /* Prevent text selection and context menus */
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;

}

/* 5. RESPONSIVE MODAL (The Fix)*/
.modal {
    display: flex; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.85); justify-content: center; align-items: center; z-index: 1000;
}
.modal.hidden { display: none; }

.modal-content {
    background-color: #121213; border: 1px solid #3a3a3c; padding: 20px;
    border-radius: 10px; width: 85%; max-width: 450px; 
    text-align: center; color: white;
    
    /* SCROLL FIX: If screen is small, let the modal scroll internally */
    max-height: 80vh; 
    overflow-y: auto;
}

.close-btn { position: absolute; top: 10px; right: 15px; font-size: 28px; cursor: pointer; color: #818384; z-index: 10; }
.example-row { display: flex; align-items: center; gap: 10px; margin: 8px 0; }

.btn-start {
    background-color: #538d4e; color: white; border: none;
    padding: 12px 30px; font-size: 1.2rem; cursor: pointer;
    border-radius: 50px; font-weight: bold; width: 100%; margin-top: 10px;
}

/* 6. MOBILE & RESPONSIVE TWEAKS*/
@media (max-width: 600px) {
    /* --- HEADER FIX: STOP OVERLAPPING --- */
    header {
        justify-content: space-between; /* Push Title Left, Buttons Right */
        padding-left: 15px;
        padding-right: 15px;
    }

    h1 { 
        font-size: 1.1rem; 
        text-align: left; /* Align text to left */
        /* No flex-grow needed, just let it sit there */
    }

    .header-tools {
        position: static; /* STOP Floating! Join the layout flow. */
        right: auto;
        gap: 12px; /* Tighter gap between icons */
    }

    .header-tools button { 
        font-size: 1.2rem; /* Slightly smaller icons */
    }

    /* --- OTHER MOBILE TWEAKS --- */
    #keyboard { 
        gap: 4px; 
        padding: 5px; 
        /* Ensure chin is safe */
        padding-bottom: calc(30px + env(safe-area-inset-bottom)); 
    }
    
    .key { padding: 12px 0; font-size: 1.1rem; }
    
    /* Shrink tiles to fit width */
    .tile { 
        width: 11vmin; 
        height: 11vmin; 
        font-size: 1.4rem;
    }
    
    /* Modal fixes */
    .modal-content {
        padding: 15px !important;
        max-height: 75vh !important;
        width: 90% !important;
        overflow-y: auto;
    }
    .modal-content h2 { font-size: 1.2rem; }
    .modal-content p, .modal-content li { font-size: 0.85rem !important; }
}